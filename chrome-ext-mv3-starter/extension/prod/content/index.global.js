"use strict";(()=>{var _e=Object.create;var z=Object.defineProperty,ke=Object.defineProperties,Ee=Object.getOwnPropertyDescriptor,Ie=Object.getOwnPropertyDescriptors,Me=Object.getOwnPropertyNames,oe=Object.getOwnPropertySymbols,Ce=Object.getPrototypeOf,ae=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ie=(e,r,s)=>r in e?z(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,q=(e,r)=>{for(var s in r||(r={}))ae.call(r,s)&&ie(e,s,r[s]);if(oe)for(var s of oe(r))Te.call(r,s)&&ie(e,s,r[s]);return e},J=(e,r)=>ke(e,Ie(r));var ge=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Se=(e,r,s,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let g of Me(r))!ae.call(e,g)&&g!==s&&z(e,g,{get:()=>r[g],enumerable:!(o=Ee(r,g))||o.enumerable});return e};var N=(e,r,s)=>(s=e!=null?_e(Ce(e)):{},Se(r||!e||!e.__esModule?z(s,"default",{value:e,enumerable:!0}):s,e));var P=(e,r,s)=>new Promise((o,g)=>{var d=l=>{try{a(s.next(l))}catch(f){g(f)}},i=l=>{try{a(s.throw(l))}catch(f){g(f)}},a=l=>l.done?o(l.value):Promise.resolve(l.value).then(d,i);a((s=s.apply(e,r)).next())});var H=ge((V,me)=>{(function(e,r){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],r);else if(typeof V!="undefined")r(me);else{var s={exports:{}};r(s),e.browser=s.exports}})(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:V,function(e){"use strict";if(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser=="undefined"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let r="The message port closed before a response was received.",s="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",o=g=>{let d={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(d).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(t,c=void 0){super(c),this.createItem=t}get(t){return this.has(t)||this.set(t,this.createItem(t)),super.get(t)}}let a=n=>n&&typeof n=="object"&&typeof n.then=="function",l=(n,t)=>(...c)=>{g.runtime.lastError?n.reject(new Error(g.runtime.lastError.message)):t.singleCallbackArg||c.length<=1&&t.singleCallbackArg!==!1?n.resolve(c[0]):n.resolve(c)},f=n=>n==1?"argument":"arguments",L=(n,t)=>function(A,...x){if(x.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${f(t.minArgs)} for ${n}(), got ${x.length}`);if(x.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${f(t.maxArgs)} for ${n}(), got ${x.length}`);return new Promise((h,w)=>{if(t.fallbackToNoCallback)try{A[n](...x,l({resolve:h,reject:w},t))}catch(m){console.warn(`${n} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),A[n](...x),t.fallbackToNoCallback=!1,t.noCallback=!0,h()}else t.noCallback?(A[n](...x),h()):A[n](...x,l({resolve:h,reject:w},t))})},T=(n,t,c)=>new Proxy(t,{apply(A,x,h){return c.call(x,n,...h)}}),k=Function.call.bind(Object.prototype.hasOwnProperty),O=(n,t={},c={})=>{let A=Object.create(null),x={has(w,m){return m in n||m in A},get(w,m,y){if(m in A)return A[m];if(!(m in n))return;let p=n[m];if(typeof p=="function")if(typeof t[m]=="function")p=T(n,n[m],t[m]);else if(k(c,m)){let I=L(m,c[m]);p=T(n,n[m],I)}else p=p.bind(n);else if(typeof p=="object"&&p!==null&&(k(t,m)||k(c,m)))p=O(p,t[m],c[m]);else if(k(c,"*"))p=O(p,t[m],c["*"]);else return Object.defineProperty(A,m,{configurable:!0,enumerable:!0,get(){return n[m]},set(I){n[m]=I}}),p;return A[m]=p,p},set(w,m,y,p){return m in A?A[m]=y:n[m]=y,!0},defineProperty(w,m,y){return Reflect.defineProperty(A,m,y)},deleteProperty(w,m){return Reflect.deleteProperty(A,m)}},h=Object.create(n);return new Proxy(h,x)},B=n=>({addListener(t,c,...A){t.addListener(n.get(c),...A)},hasListener(t,c){return t.hasListener(n.get(c))},removeListener(t,c){t.removeListener(n.get(c))}}),we=new i(n=>typeof n!="function"?n:function(c){let A=O(c,{},{getContent:{minArgs:0,maxArgs:0}});n(A)}),se=!1,ne=new i(n=>typeof n!="function"?n:function(c,A,x){let h=!1,w,m=new Promise(S=>{w=function(v){se||(console.warn(s,new Error().stack),se=!0),h=!0,S(v)}}),y;try{y=n(c,A,w)}catch(S){y=Promise.reject(S)}let p=y!==!0&&a(y);if(y!==!0&&!p&&!h)return!1;let I=S=>{S.then(v=>{x(v)},v=>{let U;v&&(v instanceof Error||typeof v.message=="string")?U=v.message:U="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:U})}).catch(v=>{console.error("Failed to send onMessage rejected reply",v)})};return I(p?y:m),!0}),ye=({reject:n,resolve:t},c)=>{g.runtime.lastError?g.runtime.lastError.message===r?t():n(new Error(g.runtime.lastError.message)):c&&c.__mozWebExtensionPolyfillReject__?n(new Error(c.message)):t(c)},te=(n,t,c,...A)=>{if(A.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${f(t.minArgs)} for ${n}(), got ${A.length}`);if(A.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${f(t.maxArgs)} for ${n}(), got ${A.length}`);return new Promise((x,h)=>{let w=ye.bind(null,{resolve:x,reject:h});A.push(w),c.sendMessage(...A)})},ve={devtools:{network:{onRequestFinished:B(we)}},runtime:{onMessage:B(ne),onMessageExternal:B(ne),sendMessage:te.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:te.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},W={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return d.privacy={network:{"*":W},services:{"*":W},websites:{"*":W}},O(g,ve,d)};e.exports=o(chrome)}else e.exports=globalThis.browser})});var D=ge((He,G)=>{var $e=e=>typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"?()=>{let r=crypto.getRandomValues(new Uint8Array(1))[0];return(r>=e?r%e:r).toString(e)}:()=>Math.floor(Math.random()*e).toString(e),de=(e=7,r=!1)=>Array.from({length:e},$e(r?16:36)).join("");G.exports=de;G.exports.default=de});var j=()=>({events:{},emit(e,...r){(this.events[e]||[]).forEach(s=>s(...r))},on(e,r){return(this.events[e]=this.events[e]||[]).push(r),()=>this.events[e]=(this.events[e]||[]).filter(s=>s!==r)}});var E=N(H(),1);var Ne=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],Z=Symbol(".toJSON was called"),Pe=e=>{e[Z]=!0;let r=e.toJSON();return delete e[Z],r},le=({from:e,seen:r,to_:s,forceEnumerable:o,maxDepth:g,depth:d})=>{let i=s||(Array.isArray(e)?[]:{});if(r.push(e),d>=g)return i;if(typeof e.toJSON=="function"&&e[Z]!==!0)return Pe(e);for(let[a,l]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(l)){i[a]="[object Buffer]";continue}if(l!==null&&typeof l=="object"&&typeof l.pipe=="function"){i[a]="[object Stream]";continue}if(typeof l!="function"){if(!l||typeof l!="object"){i[a]=l;continue}if(!r.includes(e[a])){d++,i[a]=le({from:e[a],seen:[...r],forceEnumerable:o,maxDepth:g,depth:d});continue}i[a]="[Circular]"}}for(let{property:a,enumerable:l}of Ne)typeof e[a]=="string"&&Object.defineProperty(i,a,{value:e[a],enumerable:o?!0:l,configurable:!0,writable:!0});return i};function ce(e,r={}){let{maxDepth:s=Number.POSITIVE_INFINITY}=r;return typeof e=="object"&&e!==null?le({from:e,seen:[],forceEnumerable:!0,maxDepth:s,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}var fe=N(D(),1),R=N(H(),1),he=N(D(),1),Fe=N(D(),1);var Re=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,pe=e=>{let[,r,s,o]=e.match(Re)||[];return{context:r,tabId:+s,frameId:o?+o:void 0}};var Y=e=>R.default[e],Le=()=>{var e,r,s;let o=R.default.runtime.getManifest();if(typeof window=="undefined")return"background";let g=((e=o.browser_action)==null?void 0:e.default_popup)||((r=o.action)==null?void 0:r.default_popup);return g&&new URL(R.default.runtime.getURL(g)).pathname===window.location.pathname?"popup":(s=o.options_ui)!=null&&s.page&&new URL(R.default.runtime.getURL(o.options_ui.page)).pathname===window.location.pathname?"options":"background"},u=Y("devtools")?"devtools":Y("tabs")?Le():Y("extension")?"content-script":typeof document!="undefined"?"window":null,Ae=(0,fe.default)(),K=new Map,xe=new Map,Q=new Set,X=new Map,b=null,C,be;$();function $(){if(u===null)throw new Error("Unable to detect runtime context i.e webext-bridge can't figure out what to do");if((u==="window"||u==="content-script")&&window.addEventListener("message",je),u==="content-script"&&top===window&&(b=E.default.runtime.connect(),b.onMessage.addListener(e=>{_(e)}),b.onDisconnect.addListener(()=>{b=null,$()})),u==="content-script"&&top!==window&&(b=E.default.runtime.connect(),b.onMessage.addListener(e=>{_(e)}),b.onDisconnect.addListener(()=>{b=null,$()})),u==="devtools"){let{tabId:e}=E.default.devtools.inspectedWindow,r=`devtools@${e}`;b=E.default.runtime.connect(void 0,{name:r}),b.onMessage.addListener(s=>{_(s)}),b.onDisconnect.addListener(()=>{b=null,$()})}if(u==="popup"||u==="options"){let e=`${u}`;b=E.default.runtime.connect(void 0,{name:e}),b.onMessage.addListener(r=>{_(r)}),b.onDisconnect.addListener(()=>{b=null,$()})}u==="background"&&E.default.runtime.onConnect.addListener(e=>{let r=e.name||`content-script@${e.sender.tab.id}`,s=e.sender.frameId;s&&(r=`${r}.${s}`);let{context:o,tabId:g,frameId:d}=pe(r);!g&&o!=="popup"&&o!=="options"||(X.set(r,e),Q.forEach(i=>{i.resolvedDestination===r&&(e.postMessage(i.message),Q.delete(i))}),e.onDisconnect.addListener(()=>{X.delete(r)}),e.onMessage.addListener(i=>{var a;(a=i==null?void 0:i.origin)!=null&&a.context&&(i.origin.tabId=g,i.origin.frameId=d,_(i))}))})}function _(e){let{origin:r,destination:s}=e;if(!e.hops.includes(Ae)&&(e.hops.push(Ae),!(u==="content-script"&&[s,r].some(o=>(o==null?void 0:o.context)==="window")&&!be))){if(!s)return Oe(e);if(s.context){if(u==="window")return ee(window,e);if(u==="content-script"&&s.context==="window")return e.destination=null,ee(window,e);if(["devtools","content-script","popup","options"].includes(u))return s.context==="background"&&(e.destination=null),b.postMessage(e);if(u==="background"){let{context:o,tabId:g,frameId:d}=s,{tabId:i}=r;o!=="window"?e.destination=null:e.destination.tabId=null;let a=["popup","options"].includes(o)?o:`${o==="window"?"content-script":o}@${g||i}`;d&&(a=`${a}.${d}`);let l=X.get(a);l?l.postMessage(e):Q.add({resolvedDestination:a,message:e})}}}}function Oe(e){return P(this,null,function*(){let{transactionId:r,messageID:s,messageType:o}=e,g=()=>{let i=K.get(r);if(i){let{err:a,data:l}=e;if(a){let f=a,L=self[f.name],T=new(typeof L=="function"?L:Error)(f.message);for(let k in f)T[k]=f[k];i.reject(T)}else i.resolve(l);K.delete(r)}},d=()=>P(this,null,function*(){let i,a,l=!1;try{let f=xe.get(s);if(typeof f=="function")i=yield f({sender:e.origin,id:s,data:e.data,timestamp:e.timestamp});else throw l=!0,new Error(`[webext-bridge] No handler registered in '${u}' to accept messages with id '${s}'`)}catch(f){a=f}finally{if(a&&(e.err=ce(a)),_(J(q({},e),{messageType:"reply",data:i,origin:{context:u,tabId:null},destination:e.origin,hops:[]})),a&&!l)throw i}});switch(o){case"reply":return g();case"message":return d()}})}function je(s){return P(this,arguments,function*({data:e,ports:r}){if(!(u==="content-script"&&!be)){if(e.cmd==="__crx_bridge_verify_listening"&&e.scope===C&&e.context!==u)r[0].postMessage(!0);else if(e.cmd==="__crx_bridge_route_message"&&e.scope===C&&e.context!==u){let{payload:o}=e;u==="content-script"&&(o.origin={context:"window",tabId:null}),_(o)}}})}function ee(e,r){De();let s=new MessageChannel,o=setTimeout(()=>{s.port1.onmessage=null,ee(e,r)},300);s.port1.onmessage=()=>{clearTimeout(o),e.postMessage({cmd:"__crx_bridge_route_message",scope:C,context:u,payload:r},"*")},e.postMessage({cmd:"__crx_bridge_verify_listening",scope:C,context:u},"*",[s.port2])}function De(){if(typeof C!="string"||C.length===0)throw new Error(`webext-bridge uses window.postMessage to talk with other "window"(s), for message routing and stuff,which is global/conflicting operation in case there are other scripts using webext-bridge. Call Bridge#setNamespace(nsps) to isolate your app. Example: setNamespace('com.facebook.react-devtools'). Make sure to use same namespace across all your scripts whereever window.postMessage is likely to be used\``)}function F(e,r){xe.set(e,r)}function ue(e,r,s="background"){return P(this,null,function*(){let o=typeof s=="string"?pe(s):s,g="Bridge#sendMessage ->";if(!o.context)throw new TypeError(`${g} Destination must be any one of known destinations`);if(u==="background"){let{context:d,tabId:i}=o;if(d!=="background"&&!i)throw new TypeError(`${g} When sending messages from background page, use @tabId syntax to target specific tab`)}return new Promise((d,i)=>{let a={messageID:e,data:r,destination:o,messageType:"message",transactionId:(0,he.default)(),origin:{context:u,tabId:null},hops:[],timestamp:Date.now()};K.set(a.transactionId,{resolve:d,reject:i}),_(a)})})}var M=class{constructor(e){this.handleStreamClose=()=>{this.isClosed||(this.isClosed=!0,this.emitter.emit("closed",!0),this.emitter.events={})},this.internalInfo=e,this.emitter=j(),this.isClosed=!1,M.initDone||(F("__crx_bridge_stream_transfer__",r=>{let{streamId:s,streamTransfer:o,action:g}=r.data,d=M.openStreams.get(s);d&&!d.isClosed&&(g==="transfer"&&d.emitter.emit("message",o),g==="close"&&(M.openStreams.delete(s),d.handleStreamClose()))}),M.initDone=!0),M.openStreams.set(e.streamId,this)}get info(){return this.internalInfo}send(e){if(this.isClosed)throw new Error("Attempting to send a message over closed stream. Use stream.onClose(<callback>) to keep an eye on stream status");ue("__crx_bridge_stream_transfer__",{streamId:this.internalInfo.streamId,streamTransfer:e,action:"transfer"},this.internalInfo.endpoint)}close(e){e&&this.send(e),this.handleStreamClose(),ue("__crx_bridge_stream_transfer__",{streamId:this.internalInfo.streamId,streamTransfer:null,action:"close"},this.internalInfo.endpoint)}onMessage(e){return this.getDisposable("message",e)}onClose(e){return this.getDisposable("closed",e)}getDisposable(e,r){let s=this.emitter.on(e,r);return Object.assign(s,{dispose:s,close:s})}},re=M;re.initDone=!1;re.openStreams=new Map;var Be=new Map,We=j();F("__crx_bridge_stream_open__",e=>new Promise(r=>{let{sender:s,data:o}=e,{channel:g}=o,d=!1,i=()=>{},a=()=>{let l=Be.get(g);typeof l=="function"?(l(new re(J(q({},o),{endpoint:s}))),d&&i(),r(!0)):d||(d=!0,i=We.on("did-change-stream-callbacks",a))};a()}));console.info("[chrome-ext-mv3-starter] Hello world from content script");F("tab-prev",({data:e})=>{console.log(`[chrome-ext-mv3-starter] Navigate from page "${e.title}"`)});})();
