"use strict";(()=>{var Ce=Object.create;var J=Object.defineProperty,Se=Object.defineProperties,Ne=Object.getOwnPropertyDescriptor,Pe=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertyNames,ce=Object.getOwnPropertySymbols,Re=Object.getPrototypeOf,Ae=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var de=(e,r,n)=>r in e?J(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,V=(e,r)=>{for(var n in r||(r={}))Ae.call(r,n)&&de(e,n,r[n]);if(ce)for(var n of ce(r))$e.call(r,n)&&de(e,n,r[n]);return e},Z=(e,r)=>Se(e,Pe(r));var G=(e,r)=>()=>(e&&(r=e(e=0)),r);var H=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Oe=(e,r,n,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let g of Le(r))!Ae.call(e,g)&&g!==n&&J(e,g,{get:()=>r[g],enumerable:!(o=Ne(r,g))||o.enumerable});return e};var P=(e,r,n)=>(n=e!=null?Ce(Re(e)):{},Oe(r||!e||!e.__esModule?J(n,"default",{value:e,enumerable:!0}):n,e));var _=(e,r,n)=>new Promise((o,g)=>{var d=l=>{try{a(n.next(l))}catch(f){g(f)}},i=l=>{try{a(n.throw(l))}catch(f){g(f)}},a=l=>l.done?o(l.value):Promise.resolve(l.value).then(d,i);a((n=n.apply(e,r)).next())});var D,Y=G(()=>{D=()=>({events:{},emit(e,...r){(this.events[e]||[]).forEach(n=>n(...r))},on(e,r){return(this.events[e]=this.events[e]||[]).push(r),()=>this.events[e]=(this.events[e]||[]).filter(n=>n!==r)}})});var Q=H((K,ue)=>{(function(e,r){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],r);else if(typeof K!="undefined")r(ue);else{var n={exports:{}};r(n),e.browser=n.exports}})(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:K,function(e){"use strict";if(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser=="undefined"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let r="The message port closed before a response was received.",n="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",o=g=>{let d={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(d).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(t,c=void 0){super(c),this.createItem=t}get(t){return this.has(t)||this.set(t,this.createItem(t)),super.get(t)}}let a=s=>s&&typeof s=="object"&&typeof s.then=="function",l=(s,t)=>(...c)=>{g.runtime.lastError?s.reject(new Error(g.runtime.lastError.message)):t.singleCallbackArg||c.length<=1&&t.singleCallbackArg!==!1?s.resolve(c[0]):s.resolve(c)},f=s=>s==1?"argument":"arguments",O=(s,t)=>function(A,...x){if(x.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${f(t.minArgs)} for ${s}(), got ${x.length}`);if(x.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${f(t.maxArgs)} for ${s}(), got ${x.length}`);return new Promise((h,w)=>{if(t.fallbackToNoCallback)try{A[s](...x,l({resolve:h,reject:w},t))}catch(m){console.warn(`${s} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),A[s](...x),t.fallbackToNoCallback=!1,t.noCallback=!0,h()}else t.noCallback?(A[s](...x),h()):A[s](...x,l({resolve:h,reject:w},t))})},S=(s,t,c)=>new Proxy(t,{apply(A,x,h){return c.call(x,s,...h)}}),E=Function.call.bind(Object.prototype.hasOwnProperty),j=(s,t={},c={})=>{let A=Object.create(null),x={has(w,m){return m in s||m in A},get(w,m,y){if(m in A)return A[m];if(!(m in s))return;let p=s[m];if(typeof p=="function")if(typeof t[m]=="function")p=S(s,s[m],t[m]);else if(E(c,m)){let M=O(m,c[m]);p=S(s,s[m],M)}else p=p.bind(s);else if(typeof p=="object"&&p!==null&&(E(t,m)||E(c,m)))p=j(p,t[m],c[m]);else if(E(c,"*"))p=j(p,t[m],c["*"]);else return Object.defineProperty(A,m,{configurable:!0,enumerable:!0,get(){return s[m]},set(M){s[m]=M}}),p;return A[m]=p,p},set(w,m,y,p){return m in A?A[m]=y:s[m]=y,!0},defineProperty(w,m,y){return Reflect.defineProperty(A,m,y)},deleteProperty(w,m){return Reflect.deleteProperty(A,m)}},h=Object.create(s);return new Proxy(h,x)},U=s=>({addListener(t,c,...A){t.addListener(s.get(c),...A)},hasListener(t,c){return t.hasListener(s.get(c))},removeListener(t,c){t.removeListener(s.get(c))}}),Ie=new i(s=>typeof s!="function"?s:function(c){let A=j(c,{},{getContent:{minArgs:0,maxArgs:0}});s(A)}),ge=!1,me=new i(s=>typeof s!="function"?s:function(c,A,x){let h=!1,w,m=new Promise(N=>{w=function(v){ge||(console.warn(n,new Error().stack),ge=!0),h=!0,N(v)}}),y;try{y=s(c,A,w)}catch(N){y=Promise.reject(N)}let p=y!==!0&&a(y);if(y!==!0&&!p&&!h)return!1;let M=N=>{N.then(v=>{x(v)},v=>{let q;v&&(v instanceof Error||typeof v.message=="string")?q=v.message:q="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:q})}).catch(v=>{console.error("Failed to send onMessage rejected reply",v)})};return M(p?y:m),!0}),Me=({reject:s,resolve:t},c)=>{g.runtime.lastError?g.runtime.lastError.message===r?t():s(new Error(g.runtime.lastError.message)):c&&c.__mozWebExtensionPolyfillReject__?s(new Error(c.message)):t(c)},le=(s,t,c,...A)=>{if(A.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${f(t.minArgs)} for ${s}(), got ${A.length}`);if(A.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${f(t.maxArgs)} for ${s}(), got ${A.length}`);return new Promise((x,h)=>{let w=Me.bind(null,{resolve:x,reject:h});A.push(w),c.sendMessage(...A)})},Te={devtools:{network:{onRequestFinished:U(Ie)}},runtime:{onMessage:U(me),onMessageExternal:U(me),sendMessage:le.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:le.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},z={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return d.privacy={network:{"*":z},services:{"*":z},websites:{"*":z}},j(g,Te,d)};e.exports=o(chrome)}else e.exports=globalThis.browser})});function pe(e,r={}){let{maxDepth:n=Number.POSITIVE_INFINITY}=r;return typeof e=="object"&&e!==null?fe({from:e,seen:[],forceEnumerable:!0,maxDepth:n,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}var je,X,De,fe,xe=G(()=>{je=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],X=Symbol(".toJSON was called"),De=e=>{e[X]=!0;let r=e.toJSON();return delete e[X],r},fe=({from:e,seen:r,to_:n,forceEnumerable:o,maxDepth:g,depth:d})=>{let i=n||(Array.isArray(e)?[]:{});if(r.push(e),d>=g)return i;if(typeof e.toJSON=="function"&&e[X]!==!0)return De(e);for(let[a,l]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(l)){i[a]="[object Buffer]";continue}if(l!==null&&typeof l=="object"&&typeof l.pipe=="function"){i[a]="[object Stream]";continue}if(typeof l!="function"){if(!l||typeof l!="object"){i[a]=l;continue}if(!r.includes(e[a])){d++,i[a]=fe({from:e[a],seen:[...r],forceEnumerable:o,maxDepth:g,depth:d});continue}i[a]="[Circular]"}}for(let{property:a,enumerable:l}of je)typeof e[a]=="string"&&Object.defineProperty(i,a,{value:e[a],enumerable:o?!0:l,configurable:!0,writable:!0});return i}});var F=H((er,ee)=>{var Fe=e=>typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"?()=>{let r=crypto.getRandomValues(new Uint8Array(1))[0];return(r>=e?r%e:r).toString(e)}:()=>Math.floor(Math.random()*e).toString(e),be=(e=7,r=!1)=>Array.from({length:e},Fe(r?16:36)).join("");ee.exports=be;ee.exports.default=be});function L(){if(u===null)throw new Error("Unable to detect runtime context i.e webext-bridge can't figure out what to do");if((u==="window"||u==="content-script")&&window.addEventListener("message",ze),u==="content-script"&&top===window&&(b=I.default.runtime.connect(),b.onMessage.addListener(e=>{k(e)}),b.onDisconnect.addListener(()=>{b=null,L()})),u==="content-script"&&top!==window&&(b=I.default.runtime.connect(),b.onMessage.addListener(e=>{k(e)}),b.onDisconnect.addListener(()=>{b=null,L()})),u==="devtools"){let{tabId:e}=I.default.devtools.inspectedWindow,r=`devtools@${e}`;b=I.default.runtime.connect(void 0,{name:r}),b.onMessage.addListener(n=>{k(n)}),b.onDisconnect.addListener(()=>{b=null,L()})}if(u==="popup"||u==="options"){let e=`${u}`;b=I.default.runtime.connect(void 0,{name:e}),b.onMessage.addListener(r=>{k(r)}),b.onDisconnect.addListener(()=>{b=null,L()})}u==="background"&&I.default.runtime.onConnect.addListener(e=>{let r=e.name||`content-script@${e.sender.tab.id}`,n=e.sender.frameId;n&&(r=`${r}.${n}`);let{context:o,tabId:g,frameId:d}=ye(r);!g&&o!=="popup"&&o!=="options"||(te.set(r,e),se.forEach(i=>{i.resolvedDestination===r&&(e.postMessage(i.message),se.delete(i))}),e.onDisconnect.addListener(()=>{te.delete(r)}),e.onMessage.addListener(i=>{var a;(a=i==null?void 0:i.origin)!=null&&a.context&&(i.origin.tabId=g,i.origin.frameId=d,k(i))}))})}function k(e){let{origin:r,destination:n}=e;if(!e.hops.includes(he)&&(e.hops.push(he),!(u==="content-script"&&[n,r].some(o=>(o==null?void 0:o.context)==="window")&&!_e))){if(!n)return Ue(e);if(n.context){if(u==="window")return oe(window,e);if(u==="content-script"&&n.context==="window")return e.destination=null,oe(window,e);if(["devtools","content-script","popup","options"].includes(u))return n.context==="background"&&(e.destination=null),b.postMessage(e);if(u==="background"){let{context:o,tabId:g,frameId:d}=n,{tabId:i}=r;o!=="window"?e.destination=null:e.destination.tabId=null;let a=["popup","options"].includes(o)?o:`${o==="window"?"content-script":o}@${g||i}`;d&&(a=`${a}.${d}`);let l=te.get(a);l?l.postMessage(e):se.add({resolvedDestination:a,message:e})}}}}function Ue(e){return _(this,null,function*(){let{transactionId:r,messageID:n,messageType:o}=e,g=()=>{let i=ne.get(r);if(i){let{err:a,data:l}=e;if(a){let f=a,O=self[f.name],S=new(typeof O=="function"?O:Error)(f.message);for(let E in f)S[E]=f[E];i.reject(S)}else i.resolve(l);ne.delete(r)}},d=()=>_(this,null,function*(){let i,a,l=!1;try{let f=ve.get(n);if(typeof f=="function")i=yield f({sender:e.origin,id:n,data:e.data,timestamp:e.timestamp});else throw l=!0,new Error(`[webext-bridge] No handler registered in '${u}' to accept messages with id '${n}'`)}catch(f){a=f}finally{if(a&&(e.err=pe(a)),k(Z(V({},e),{messageType:"reply",data:i,origin:{context:u,tabId:null},destination:e.origin,hops:[]})),a&&!l)throw i}});switch(o){case"reply":return g();case"message":return d()}})}function ze(n){return _(this,arguments,function*({data:e,ports:r}){if(!(u==="content-script"&&!_e)){if(e.cmd==="__crx_bridge_verify_listening"&&e.scope===C&&e.context!==u)r[0].postMessage(!0);else if(e.cmd==="__crx_bridge_route_message"&&e.scope===C&&e.context!==u){let{payload:o}=e;u==="content-script"&&(o.origin={context:"window",tabId:null}),k(o)}}})}function oe(e,r){qe();let n=new MessageChannel,o=setTimeout(()=>{n.port1.onmessage=null,oe(e,r)},300);n.port1.onmessage=()=>{clearTimeout(o),e.postMessage({cmd:"__crx_bridge_route_message",scope:C,context:u,payload:r},"*")},e.postMessage({cmd:"__crx_bridge_verify_listening",scope:C,context:u},"*",[n.port2])}function qe(){if(typeof C!="string"||C.length===0)throw new Error(`webext-bridge uses window.postMessage to talk with other "window"(s), for message routing and stuff,which is global/conflicting operation in case there are other scripts using webext-bridge. Call Bridge#setNamespace(nsps) to isolate your app. Example: setNamespace('com.facebook.react-devtools'). Make sure to use same namespace across all your scripts whereever window.postMessage is likely to be used\``)}function W(e,r){ve.set(e,r)}function B(e,r,n="background"){return _(this,null,function*(){let o=typeof n=="string"?ye(n):n,g="Bridge#sendMessage ->";if(!o.context)throw new TypeError(`${g} Destination must be any one of known destinations`);if(u==="background"){let{context:d,tabId:i}=o;if(d!=="background"&&!i)throw new TypeError(`${g} When sending messages from background page, use @tabId syntax to target specific tab`)}return new Promise((d,i)=>{let a={messageID:e,data:r,destination:o,messageType:"message",transactionId:(0,ke.default)(),origin:{context:u,tabId:null},hops:[],timestamp:Date.now()};ne.set(a.transactionId,{resolve:d,reject:i}),k(a)})})}var I,we,R,ke,Je,Be,ye,re,We,u,he,ne,ve,se,te,b,C,_e,T,ie,Ve,Ze,Ee=G(()=>{Y();I=P(Q(),1);xe();we=P(F(),1),R=P(Q(),1),ke=P(F(),1),Je=P(F(),1);Y();Be=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,ye=e=>{let[,r,n,o]=e.match(Be)||[];return{context:r,tabId:+n,frameId:o?+o:void 0}},re=e=>R.default[e],We=()=>{var e,r,n;let o=R.default.runtime.getManifest();if(typeof window=="undefined")return"background";let g=((e=o.browser_action)==null?void 0:e.default_popup)||((r=o.action)==null?void 0:r.default_popup);return g&&new URL(R.default.runtime.getURL(g)).pathname===window.location.pathname?"popup":(n=o.options_ui)!=null&&n.page&&new URL(R.default.runtime.getURL(o.options_ui.page)).pathname===window.location.pathname?"options":"background"},u=re("devtools")?"devtools":re("tabs")?We():re("extension")?"content-script":typeof document!="undefined"?"window":null,he=(0,we.default)(),ne=new Map,ve=new Map,se=new Set,te=new Map,b=null;L();T=class{constructor(e){this.handleStreamClose=()=>{this.isClosed||(this.isClosed=!0,this.emitter.emit("closed",!0),this.emitter.events={})},this.internalInfo=e,this.emitter=D(),this.isClosed=!1,T.initDone||(W("__crx_bridge_stream_transfer__",r=>{let{streamId:n,streamTransfer:o,action:g}=r.data,d=T.openStreams.get(n);d&&!d.isClosed&&(g==="transfer"&&d.emitter.emit("message",o),g==="close"&&(T.openStreams.delete(n),d.handleStreamClose()))}),T.initDone=!0),T.openStreams.set(e.streamId,this)}get info(){return this.internalInfo}send(e){if(this.isClosed)throw new Error("Attempting to send a message over closed stream. Use stream.onClose(<callback>) to keep an eye on stream status");B("__crx_bridge_stream_transfer__",{streamId:this.internalInfo.streamId,streamTransfer:e,action:"transfer"},this.internalInfo.endpoint)}close(e){e&&this.send(e),this.handleStreamClose(),B("__crx_bridge_stream_transfer__",{streamId:this.internalInfo.streamId,streamTransfer:null,action:"close"},this.internalInfo.endpoint)}onMessage(e){return this.getDisposable("message",e)}onClose(e){return this.getDisposable("closed",e)}getDisposable(e,r){let n=this.emitter.on(e,r);return Object.assign(n,{dispose:n,close:n})}},ie=T;ie.initDone=!1;ie.openStreams=new Map;Ve=new Map,Ze=D();W("__crx_bridge_stream_open__",e=>new Promise(r=>{let{sender:n,data:o}=e,{channel:g}=o,d=!1,i=()=>{},a=()=>{let l=Ve.get(g);typeof l=="function"?(l(new ie(Z(V({},o),{endpoint:n}))),d&&i(),r(!0)):d||(d=!0,i=Ze.on("did-change-stream-callbacks",a))};a()}))});var Ge=H(ae=>{Ee();chrome.runtime.onInstalled.addListener(()=>{console.log("Extension installed")});var $=0;chrome.tabs.onActivated.addListener(r=>_(ae,[r],function*({tabId:e}){if(!$){$=e;return}let n=yield chrome.tabs.get($);$=e,n&&(console.log("previous tab",n),B("tab-prev",{title:n.title},{context:"content-script",tabId:e}))}));W("get-current-tab",()=>_(ae,null,function*(){try{let e=yield chrome.tabs.get($);return{title:e==null?void 0:e.id}}catch(e){return{title:void 0}}}))});Ge();})();
